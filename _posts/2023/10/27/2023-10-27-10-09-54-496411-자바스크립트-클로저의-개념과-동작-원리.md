---
layout: post
title: "[javascript] 자바스크립트 클로저의 개념과 동작 원리"
description: " "
date: 2023-10-27
tags: [javascript]
comments: true
share: true
---

자바스크립트에서 클로저(closure)는 매우 중요한 개념입니다. 클로저는 함수와 함수가 선언된 어휘적 환경의 조합을 말하며, 함수가 어떤 자유 변수에 접근할 수 있는 권한을 가지게 됩니다.

## 클로저의 개념

클로저는 기본적으로 내부 함수가 외부 함수의 변수에 접근할 수 있는 것을 의미합니다. 이는 외부 함수가 이미 실행을 마쳤거나 사라진 상태에서도 내부 함수가 외부 변수에 접근할 수 있게 만들어 줍니다. 즉, 클로저는 함수가 정의될 때 존재하던 범위를 기억하여, 함수가 호출될 때 그 범위에 접근할 수 있는 기능을 제공합니다.

예를 들어, 다음과 같이 외부 함수 `outer`와 내부 함수 `inner`가 있다고 가정해 봅시다.

```javascript
function outer() {
  var count = 0;

  function inner() {
    count++;
    console.log(count);
  }

  return inner;
}

var closure = outer();
```

위 예제에서는 `outer` 함수 내부에 `count` 변수가 있고, `inner` 함수에서 `count` 변수에 접근하고 있습니다. `outer` 함수가 실행되고 나면 `inner` 함수를 반환하고, 반환된 `inner` 함수는 여전히 외부 변수 `count`에 접근할 수 있습니다. 즉, `closure` 함수를 호출할 때마다 `count` 변수가 하나씩 증가하면서 출력됩니다.

## 클로저의 동작 원리

클로저의 동작 원리는 실행 컨텍스트(Execution Context)와 스코프 체인(Scope Chain) 개념과 관련이 있습니다. 자바스크립트 엔진은 함수가 생성될 때마다 실행 컨텍스트를 만들게 되는데, 이 실행 컨텍스트는 함수의 변수, 매개변수, 내부 함수 등과 같이 함수와 관련된 정보를 담게 됩니다.

스코프 체인은 함수의 변수를 참조하는 방식을 정의한 것으로, 함수가 선언된 위치에 따라 스코프 체인이 형성됩니다. 함수가 호출되면 해당 함수의 스코프 체인이 만들어지고, 이 스코프 체인은 함수가 접근할 수 있는 변수를 정의하는데 사용됩니다.

클로저는 함수가 선언될 때의 스코프 체인을 기억하여, 호출될 때에도 동일한 스코프 체인을 사용할 수 있도록 합니다. 이로 인해 함수는 호출되는 동안에도 자신이 선언된 스코프를 유지하고, 외부 변수에 접근할 수 있게 됩니다.

## 결론

자바스크립트 클로저는 함수의 어휘적인 환경과 함수의 동작 원리를 이해하는 데 있어서 중요한 개념입니다. 클로저를 사용하면 외부 변수에 접근할 수 있는 캡슐화된 함수를 만들 수 있으며, 이는 유용한 패턴과 기법으로 활용될 수 있습니다.

참조:
- [MDN Web Docs - 클로저](https://developer.mozilla.org/ko/docs/Web/JavaScript/Guide/Closures)